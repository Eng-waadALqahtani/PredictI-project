# شرح حد درجة الخطورة (Risk Score Threshold)

## الأساس المنطقي لاختيار الرقم 80

تم تحديد الرقم **80** كحد أدنى لدرجة الخطورة التي تسبب حجب المستخدم بناءً على المعايير التالية:

### 1. **التصنيف الثلاثي للمخاطر:**

```
0-49:   منخفضة (Low Risk)
        - سلوك طبيعي أو شك بسيط
        - لا يتطلب إجراء فوري
        - قد يحتاج مراقبة فقط

50-79:  متوسطة (Medium Risk)  
        - سلوك مشبوه يحتاج مراقبة
        - لا يحجب لكن يسجل في النظام
        - يمكن رفع التحذيرات

80-100: عالية (High Risk)
        - سلوك خطير يستدعي الحجب الفوري
        - احتمال عالي جداً أن يكون تهديداً حقيقياً
        - يتم حجب المستخدم تلقائياً
```

### 2. **النسبة المئوية:**

الرقم **80** يمثل **80% من الخطورة القصوى**، أي أننا نحجب عندما يكون هناك احتمال 80% أو أكثر أن السلوك يمثل تهديداً حقيقياً.

### 3. **التوازن بين الأمان والسهولة:**

- **تقليل False Positives**: عدم حجب مستخدمين شرعيين
- **ضمان الكشف الفوري**: عدم تفويت التهديدات الحقيقية

### 4. **المعايير المستخدمة:**

- **Isolation Forest ML Model**: يعطي درجات من -1 إلى 0 (يتم تحويلها إلى 0-100)
- **القواعد الإضافية**: Device Change, Geographic Jump, Multi-Account, Browser Hopping
- **الخبرة العملية**: الحد 80 يعطي نتائج جيدة في معظم الحالات

## كيفية تعديل الحد

يمكن تعديل الحد في ملف `backend/engine.py`:

```python
RISK_SCORE_BLOCKING_THRESHOLD = 80  # يمكن تعديله هنا
```

### خيارات التعديل:

#### أكثر تحفظاً (أقل False Positives):
```python
RISK_SCORE_BLOCKING_THRESHOLD = 85  # أو 90
```
- ✅ أقل احتمال لحجب مستخدمين شرعيين
- ❌ قد تفوت بعض التهديدات الخفية

#### أكثر حساسية (يكتشف أكثر):
```python
RISK_SCORE_BLOCKING_THRESHOLD = 70  # أو 75
```
- ✅ يكتشف تهديدات أكثر
- ❌ قد يحجب بعض المستخدمين الشرعيين

#### الحالي (موصى به):
```python
RISK_SCORE_BLOCKING_THRESHOLD = 80
```
- ✅ توازن جيد بين الأمان والسهولة
- ✅ يعمل بشكل جيد في معظم السيناريوهات

## ملاحظات مهمة:

1. عند تغيير الحد، يجب اختبار النظام جيداً
2. يمكن استخدام **A/B Testing** لمقارنة الأداء
3. يمكن تطبيق حدود مختلفة حسب نوع التطبيق أو المستخدم
4. الحد الحالي (80) مناسب للتطبيقات الحكومية والأمنية العالية

