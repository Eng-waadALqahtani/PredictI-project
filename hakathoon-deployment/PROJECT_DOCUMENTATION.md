# ๐ ูุซููุฉ ุงููุดุฑูุน ุงูุดุงููุฉ - Digital Threat Fingerprint

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ ุนูู ุงููุดุฑูุน

**Digital Threat Fingerprint** ูู ูุธุงู ูุชูุงูู ูุงูุชุดุงู ุงูุชูุฏูุฏุงุช ุงูุณููููุฉ ุนุจุฑ ุงูููุตุงุช ุงูุญููููุฉ ุงูุณุนูุฏูุฉ. ูุนูู ุงููุธุงู ุนูู ูุฑุงูุจุฉ ุณููู ุงููุณุชุฎุฏููู ูู ุงูููุช ุงููุนููุ ูุชุญููู ุงูุฃููุงุท ุงููุดุจููุฉุ ูุฅูุดุงุก "ุจุตูุงุช ุชูุฏูุฏ" (Threat Fingerprints) ูููู ุงุณุชุฎุฏุงููุง ูููุน ุงููุตูู ุนุจุฑ ุงูููุตุงุช ุงููุฎุชููุฉ.

---

## ๐๏ธ ุงูุจููุฉ ุงููุนูุงุฑูุฉ ูููุดุฑูุน

### ุงููููู ุงูุนุงู:
```
hakathoon/
โโโ backend/              # ุงูุฎุงุฏู ุงูุฎููู (Flask)
โ   โโโ main.py          # ููุทุฉ ุงูุฏุฎูู ุงูุฑุฆูุณูุฉ ู API endpoints
โ   โโโ engine.py        # ูุญุฑู ุชุญููู ุงูุชูุฏูุฏุงุช
โ   โโโ models.py        # ููุงุฐุฌ ุงูุจูุงูุงุช (Event, ThreatFingerprint)
โ   โโโ storage.py       # ุงูุชุฎุฒูู ูู ุงูุฐุงูุฑุฉ
โ   โโโ venv/            # ุงูุจูุฆุฉ ุงูุงูุชุฑุงุถูุฉ
โโโ frontend/            # ุงููุงุฌูุฉ ุงูุฃูุงููุฉ
โ   โโโ public/          # ุตูุญุงุช HTML
โ   โ   โโโ dashboard.html
โ   โ   โโโ absher-login.html
โ   โ   โโโ tawakkalna-login.html
โ   โ   โโโ health-portal.html
โ   โโโ js/              # ูููุงุช JavaScript
โ       โโโ events.js    # ุชุชุจุน ุงูุฃุญุฏุงุซ ุงููุฑูุฒู
โโโ ml/                  # ููุงุฐุฌ ุงูุชุนูู ุงูุขูู
    โโโ models/
        โโโ isoforest_absher.pkl
```

---

## ๐ ุงููุฑุงุญู ุงูุชุทููุฑูุฉ - ุดุฑุญ ุชูุตููู

---

## ุงููุฑุญูุฉ 1: ุฅุนุฏุงุฏ ุงูุจููุฉ ุงูุฃุณุงุณูุฉ (Backend Foundation)

### 1.1 ุฅูุดุงุก ููุงุฐุฌ ุงูุจูุงูุงุช (`models.py`)

**ุงููุฏู:** ุชุนุฑูู ููุงูู ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ ูููุธุงู.

#### Event Model:
```python
@dataclass
class Event:
    event_type: str          # ููุน ุงูุญุฏุซ (login_attempt, download_file, etc.)
    user_id: str             # ูุนุฑู ุงููุณุชุฎุฏู
    device_id: str           # ูุนุฑู ุงูุฌูุงุฒ
    timestamp1: datetime      # ููุช ุงูุญุฏุซ
    platform: str            # ุงูููุตุฉ (tawakkalna, absher, etc.)
    ip_address: str          # ุนููุงู IP
    user_agent: str          # ูุนูููุงุช ุงููุชุตูุญ
```

**ุงูุณุจุจ:** ูู ุญุฏุซ ููุซู ุฅุฌุฑุงุกู ูููู ุจู ุงููุณุชุฎุฏู. ูุฐู ุงูุจูุงูุงุช ุถุฑูุฑูุฉ ูุชุญููู ุงูุณููู.

#### ThreatFingerprint Model:
```python
@dataclass
class ThreatFingerprint:
    fingerprint_id: str      # ูุนุฑู ูุฑูุฏ ููุจุตูุฉ
    risk_score: int          # ุฏุฑุฌุฉ ุงูุฎุทูุฑุฉ (0-100)
    user_id: str             # ุงููุณุชุฎุฏู ุงููุฑุชุจุท
    status: str              # ุงูุญุงูุฉ (ACTIVE, BLOCKED, CLEARED)
    behavioral_features: Dict # ุงูุฎุตุงุฆุต ุงูุณููููุฉ
    device_id: str           # ูุนุฑู ุงูุฌูุงุฒ
    ip_address: str          # ุนููุงู IP
    user_agent: str          # ูุนูููุงุช ุงููุชุตูุญ
```

**ุงูุณุจุจ:** ุงูุจุตูุฉ ุชูุซู ุชูุฏูุฏุงู ูุญุชููุงู. ุนูุฏูุง ูุชู ุงูุชุดุงู ุณููู ูุดุจููุ ูุชู ุฅูุดุงุก ุจุตูุฉ ูููู ุงุณุชุฎุฏุงููุง ูููุน ุงููุตูู ูุงุญูุงู.

---

### 1.2 ูุธุงู ุงูุชุฎุฒูู (`storage.py`)

**ุงููุฏู:** ุฅุฏุงุฑุฉ ุงูุชุฎุฒูู ูู ุงูุฐุงูุฑุฉ ููุฃุญุฏุงุซ ูุงูุจุตูุงุช.

#### ุงููุชุบูุฑุงุช ุงูุฑุฆูุณูุฉ:
```python
EVENTS_STORE = []           # ูุงุฆูุฉ ุฌููุน ุงูุฃุญุฏุงุซ
FINGERPRINTS_STORE = []     # ูุงุฆูุฉ ุฌููุน ุงูุจุตูุงุช
```

#### ุงูุฏูุงู ุงูุฃุณุงุณูุฉ:
- `store_event(event)` - ุญูุธ ุญุฏุซ ุฌุฏูุฏ
- `get_fingerprints()` - ุฌูุจ ุฌููุน ุงูุจุตูุงุช
- `update_fingerprint_status()` - ุชุญุฏูุซ ุญุงูุฉ ุงูุจุตูุฉ
- `clear_user_fingerprints()` - ูุณุญ ุจุตูุงุช ูุณุชุฎุฏู
- `delete_fingerprint()` - ุญุฐู ุจุตูุฉ ููุงุฆูุงู

**ุงูุณุจุจ:** ูุญุชุงุฌ ุชุฎุฒูู ูุคูุช ูู ุงูุฐุงูุฑุฉ ููุนุฑุถ ุงูุชูุถูุญู. ูู ุงูุฅูุชุงุฌุ ุณูุชู ุงุณุชุจุฏุงู ูุฐุง ุจูุงุนุฏุฉ ุจูุงูุงุช.

---

### 1.3 ูุญุฑู ุชุญููู ุงูุชูุฏูุฏุงุช (`engine.py`)

**ุงููุฏู:** ุชุญููู ุงูุฃุญุฏุงุซ ูุฅูุดุงุก ุจุตูุงุช ุงูุชูุฏูุฏ ุนูุฏ ุงูุชุดุงู ุณููู ูุดุจูู.

#### ุงูุนูููุฉ ุงูุฑุฆูุณูุฉ (`process_event`):

**ุงูุฎุทูุฉ 1: ุญุณุงุจ ุงูุฎุตุงุฆุต ุงูุณููููุฉ**
```python
behavioral_features = calculate_behavioral_features(
    user_id, device_id, current_time
)
```

**ูุง ูุชู ุญุณุงุจู:**
- `total_events` - ุฅุฌูุงูู ุงูุฃุญุฏุงุซ
- `events_per_minute` - ูุนุฏู ุงูุฃุญุฏุงุซ ูู ุงูุฏูููุฉ
- `update_mobile_attempt_count` - ูุญุงููุงุช ุชุญุฏูุซ ุฑูู ุงูุฌูุงู
- `fast_drain` - ุงุณุชูุฒุงู ุณุฑูุน ููุฎุฏูุงุช
- ูุบูุฑูุง...

**ุงูุณุจุจ:** ูุญุชุงุฌ ููุงุณุงุช ุฑูููุฉ ููุตู ุงูุณููู.

**ุงูุฎุทูุฉ 2: ุญุณุงุจ ุฏุฑุฌุฉ ุงูุฎุทูุฑุฉ (ML + Rules)**

**ุฃ) ูููุฐุฌ ุงูุชุนูู ุงูุขูู (Isolation Forest):**
```python
if model_loaded:
    risk_score = model.predict(features)
```

**ุจ) ููุงุนุฏ ุงููุดู (Fallback Rules):**
```python
# ูุดู ุงูููุฑุงุช ุงูุณุฑูุนุฉ
recent = [e for e in EVENTS_STORE[-10:]]
if len(recent) >= 8:
    delta = (recent[-1].timestamp1 - recent[0].timestamp1).total_seconds()
    if delta <= 3:  # 8 ุฃุญุฏุงุซ ูู 3 ุซูุงูู
        should_create_fingerprint = True
        risk_score = max(risk_score, 95)
```

**ุงูุณุจุจ:** 
- ML ููุชุดู ุงูุฃููุงุท ุงููุนูุฏุฉ
- ุงูููุงุนุฏ ุชุถูู ุงููุดู ุญุชู ูู ูุดู ML

**ุงูุฎุทูุฉ 3: ุฅูุดุงุก ุงูุจุตูุฉ**
```python
if should_create_fingerprint and risk_score >= 80:
    fingerprint = ThreatFingerprint(
        fingerprint_id=f"fp-{uuid.uuid4().hex[:12]}",
        risk_score=risk_score,
        user_id=event.user_id,
        status="ACTIVE",
        behavioral_features=behavioral_features,
        device_id=event.device_id,
        ip_address=event.ip_address,
        user_agent=event.user_agent
    )
    store_fingerprint(fingerprint)
```

**ุงูุณุจุจ:** ุนูุฏูุง ูููู ุงูุณููู ูุดุจููุงู ุจุฏุฑุฌุฉ ูุงููุฉุ ูุญูุธ ุงูุจุตูุฉ ููุงุณุชุฎุฏุงู ูุงุญูุงู.

---

### 1.4 API Endpoints (`main.py`)

**ุงููุฏู:** ุชูููุฑ ูุงุฌูุงุช ุจุฑูุฌูุฉ ูููุงุฌูุฉ ุงูุฃูุงููุฉ.

#### POST `/api/v1/event`
**ุงููุธููุฉ:** ุงุณุชูุจุงู ุงูุฃุญุฏุงุซ ูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ

**ุงูุนูููุฉ:**
1. ุงุณุชูุจุงู ุงูุจูุงูุงุช ูู ุงูุทูุจ
2. ุงุณุชุฎุฑุงุฌ IP ู User-Agent ูู ุงูุทูุจ
3. ุฅูุดุงุก ูุงุฆู Event
4. ุญูุธ ุงูุญุฏุซ
5. ูุนุงูุฌุฉ ุงูุญุฏุซ ุนุจุฑ `process_event()`
6. ุฅุฑุฌุงุน ุงููุชูุฌุฉ

**ุงูุณุจุจ:** ูุฐู ูู ููุทุฉ ุงูุฏุฎูู ุงูุฑุฆูุณูุฉ ูุฌููุน ุงูุฃุญุฏุงุซ.

#### GET `/api/v1/fingerprints`
**ุงููุธููุฉ:** ุฌูุจ ุฌููุน ุงูุจุตูุงุช ููุนุฑุถ ูู Dashboard

**ุงูุณุจุจ:** Dashboard ูุญุชุงุฌ ุนุฑุถ ุงูุจุตูุงุช.

#### POST `/api/v1/check-and-login`
**ุงููุธููุฉ:** ุงูุชุญูู ูู ูุฌูุฏ ุจุตูุฉ ูุดุทุฉ ูุจู ุงูุณูุงุญ ุจุชุณุฌูู ุงูุฏุฎูู

**ุงูุนูููุฉ:**
```python
is_fingerprinted = is_user_fingerprinted(user_id)
if is_fingerprinted:
    return {"status": "blocked", "allowed": False}, 403
else:
    return {"status": "ok", "allowed": True}, 200
```

**ุงูุณุจุจ:** ูุฐุง ูู ุงูููุจ ุงูุฃููู - ูููุน ุงููุณุชุฎุฏููู ุงููุดุจูููู ูู ุงูุฏุฎูู.

#### POST `/api/v1/confirm-threat`
**ุงููุธููุฉ:** ุชุฃููุฏ ุงูุชูุฏูุฏ (ุชุบููุฑ ุงูุญุงูุฉ ุฅูู BLOCKED)

**ุงูุณุจุจ:** ุงููุดุบู ูุญุชุงุฌ ุชุฃููุฏ ุงูุชูุฏูุฏุงุช ูุฏููุงู.

#### POST `/api/v1/unblock-user`
**ุงููุธููุฉ:** ุฅุฒุงูุฉ ุงูููุน (ุชุบููุฑ ุงูุญุงูุฉ ุฅูู CLEARED)

**ุงูุณุจุจ:** ุงููุดุบู ูุญุชุงุฌ ุฅุฒุงูุฉ ุงูููุน ุนู ุงููุณุชุฎุฏููู.

#### POST `/api/v1/delete-fingerprint`
**ุงููุธููุฉ:** ุญุฐู ุจุตูุฉ ููุงุฆูุงู

**ุงูุณุจุจ:** ุงููุดุบู ูุญุชุงุฌ ุญุฐู ุงูุจุตูุงุช ุงูุฎุงุทุฆุฉ.

---

## ุงููุฑุญูุฉ 2: ุงููุงุฌูุฉ ุงูุฃูุงููุฉ - ุชุชุจุน ุงูุฃุญุฏุงุซ ุงููุฑูุฒู

### 2.1 ูุธุงู ุงูุชุชุจุน ุงููุฑูุฒู (`events.js`)

**ุงููุฏู:** ุฅูุดุงุก ูุธุงู ููุญุฏ ูุชุชุจุน ุงูุฃุญุฏุงุซ ูู ุฌููุน ุงูุตูุญุงุช.

#### 2.1.1 ุชุนุฑููุงุช DEMO:
```javascript
const DEMO_USER_ID = "user-8456123848";     // ูุนุฑู ุซุงุจุช ููุนุฑุถ ุงูุชูุถูุญู
const DEMO_DEVICE_ID = "device-demo-01";    // ูุนุฑู ุฌูุงุฒ ุซุงุจุช
```

**ุงูุณุจุจ:** ูู ุงูุนุฑุถ ุงูุชูุถูุญูุ ูุฑูุฏ ููุณ ุงููุณุชุฎุฏู ุนุจุฑ ุฌููุน ุงูููุตุงุช ูุงุฎุชุจุงุฑ ุงูุญุฌุจ ุนุจุฑ ุงูููุตุงุช.

#### 2.1.2 ุฏุงูุฉ sendEvent ุงูุนุงูุฉ:
```javascript
function sendEvent(eventType, serviceName = null, extra = {}) {
    const payload = {
        event_type: eventType,
        user_id: getCurrentUserId(),
        device_id: getCurrentDeviceId(),
        timestamp1: new Date().toISOString(),
        service_name: serviceName,
        platform: getCurrentPlatform(),
        ...extra
    };
    
    return fetch(`${API_BASE}/api/v1/event`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
    });
}
```

**ุงูุณุจุจ:** 
- ุฏุงูุฉ ูุงุญุฏุฉ ูุฌููุน ุงูุฃุญุฏุงุซ
- ุชููุงุฆูุงู ุชุถูู user_id, device_id, platform
- ุณููุฉ ุงูุงุณุชุฎุฏุงู ูู ุฃู ุตูุญุฉ

#### 2.1.3 ูุงุดู ุงูููุฑุงุช ุงูุณุฑูุนุฉ:
```javascript
function attachRapidClickDetector(element, options = {}) {
    let clickTimes = [];
    
    element.addEventListener("click", () => {
        const now = Date.now();
        clickTimes.push(now);
        
        // ุฅุฒุงูุฉ ุงูููุฑุงุช ุงููุฏููุฉ
        clickTimes = clickTimes.filter(t => now - t <= windowLongMs);
        
        const clicksShort = clickTimes.filter(t => now - t <= 1000).length;
        
        if (clicksShort >= 5) {  // 5 ููุฑุงุช ูู ุซุงููุฉ ูุงุญุฏุฉ
            sendEvent("ui_suspicious_pattern", null, {
                pattern: "rapid_clicks",
                clicks_short: clicksShort
            });
        }
    });
}
```

**ุงูุณุจุจ:** ูุดู ุชููุงุฆู ูููุฌูุงุช ุงูุชู ุชุนุชูุฏ ุนูู ุงูููุฑุงุช ุงูุณุฑูุนุฉ.

#### 2.1.4 ุงูุฑุจุท ุงูุชููุงุฆู:
```javascript
window.addEventListener("DOMContentLoaded", () => {
    // ุฑุจุท ุชููุงุฆู ูุฌููุน ุงูุฃุฒุฑุงุฑ ุงููููุฒุฉ ุจู data-track-service
    document.querySelectorAll("[data-track-service]").forEach(btn => {
        attachRapidClickDetector(btn);
        btn.addEventListener("click", () => {
            const serviceName = btn.getAttribute("data-track-service");
            sendEvent("view_service", serviceName);
        });
    });
});
```

**ุงูุณุจุจ:** ูุง ุญุงุฌุฉ ููุชุงุจุฉ ููุฏ ููู ุฒุฑ - ูุนูู ุชููุงุฆูุงู.

---

## ุงููุฑุญูุฉ 3: ุตูุญุงุช ุชุณุฌูู ุงูุฏุฎูู

### 3.1 ุตูุญุฉ ุชููููุง (`tawakkalna-login.html`)

**ุงููุฏู:** ูุญุงูุงุฉ ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู ูู ุชููููุง.

#### ุงูููุฒุงุช:
1. **ูููุฐุฌ ุชุณุฌูู ุงูุฏุฎูู:**
   - ุญููู: ุฑูู ุงููููุฉุ ุชุงุฑูุฎ ุงููููุงุฏ
   - ุฒุฑ ุชุณุฌูู ุงูุฏุฎูู

2. **ุฅุฑุณุงู ุงูุฃุญุฏุงุซ:**
   ```javascript
   sendEvent('login_attempt', null, { page: 'tawakkalna' });
   // ุจุนุฏ ุงููุฌุงุญ:
   sendEvent('login_success', null, { page: 'tawakkalna' });
   ```

3. **ุงูุชุญูู ูู ุงูุญุฌุจ:**
   ```javascript
   const response = await fetch(`${API_BASE}/api/v1/check-and-login`, {
       method: 'POST',
       body: JSON.stringify({ user_id: getCurrentUserId() })
   });
   
   if (response.status === 403) {
       showBlockedOverlay();  // ุนุฑุถ ุฑุณุงูุฉ ุงูุญุฌุจ
   }
   ```

**ุงูุณุจุจ:** ูุญุชุงุฌ ูุญุงูุงุฉ ููุตุฉ ุญููููุฉ ูุงุฎุชุจุงุฑ ุงููุธุงู.

---

### 3.2 ุตูุญุฉ ุฃุจุดุฑ (`absher-login.html`)

**ุงููุฏู:** ูุญุงูุงุฉ ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู ูู ุฃุจุดุฑ ูุน ููุญุฉ ุฎุฏูุงุช.

#### ุงูููุฒุงุช:

1. **ูููุฐุฌ ุชุณุฌูู ุงูุฏุฎูู:**
   - ุญููู: ุงุณู ุงููุณุชุฎุฏูุ ูููุฉ ุงููุฑูุฑ
   - ุฒุฑ ุชุณุฌูู ุงูุฏุฎูู

2. **ููุญุฉ ุงูุฎุฏูุงุช (ุจุนุฏ ุงููุฌุงุญ):**
   - **ุฎุฏูุงุช ุงููุฑูุฑ:**
     - ุชูููุถ ูุฑูุจุฉ
     - ุงููุฎุงููุงุช ุงููุฑูุฑูุฉ
     - ุชูุงุฑูุฑ ุงูุญูุงุฏุซ
   
   - **ุงูุฎุฏูุงุช ุงูุดุฎุตูุฉ:**
     - ุงููููุฉ ุงูุฑูููุฉ
     - ุฎุฏูุฉ ุจูุงูุงุชู
     - ุณุฌู ุงูุฃุณุฑุฉ
     - ุณุฌู ุงูุณูุฑ

3. **ูู ุฒุฑ ุฎุฏูุฉ:**
   ```html
   <button class="service-btn" 
           data-track-service="vehicle_authorization"
           onclick="handleServiceClick('vehicle_authorization', 'ุชูููุถ ูุฑูุจุฉ')">
       ูุชุญ ุงูุฎุฏูุฉ
   </button>
   ```
   
   **ูุนูู ุชููุงุฆูุงู:**
   - ูุฑุณู ุญุฏุซ `view_service`
   - ูุฏุนู ูุดู ุงูููุฑุงุช ุงูุณุฑูุนุฉ

4. **Overlay ุงูุญุฌุจ:**
   ```javascript
   function showBlockOverlay(message) {
       // overlay ูุงูู ุงูุดุงุดุฉ ูุน ุฑุณุงูุฉ ุงูุญุฌุจ
   }
   ```

**ุงูุณุจุจ:** ูุญุชุงุฌ ููุตุฉ ุซุงููุฉ ูุงุฎุชุจุงุฑ ุงูุญุฌุจ ุนุจุฑ ุงูููุตุงุช.

---

### 3.3 ุตูุญุฉ ุงูููุตุฉ ุงูุตุญูุฉ (`health-portal.html`)

**ุงููุฏู:** ูุญุงูุงุฉ ููุตุฉ ุตุญูุฉ ูุน ุฎุฏูุงุช ุงูุชุญููู.

#### ุงูููุฒุงุช:

1. **ุฃุฒุฑุงุฑ ุชุญููู ุงูุฎุฏูุงุช:**
   - ุชูุฑูุฑ ุงููุฎุชุจุฑ 1
   - ุชูุฑูุฑ ุงููุฎุชุจุฑ 2
   - ุชูุฑูุฑ ุงูุฃุดุนุฉ
   - ุงูุณุฌู ุงูุทุจู ุงููุงูู
   - ุดูุงุฏุฉ ุงูุชุทุนูู

2. **ุฒุฑ ูุญุงูุงุฉ ุงููุฌูู:**
   ```javascript
   function simulateMassDownloadAttack() {
       // ุฅุฑุณุงู 20 ุญุฏุซ download_file ุจุณุฑุนุฉ
       for (let i = 0; i < 20; i++) {
           setTimeout(() => {
               sendEvent("download_file", serviceName);
           }, i * 100);  // ูู 100ms
       }
   }
   ```

**ุงูุณุจุจ:** ูุญุชุงุฌ ุตูุญุฉ ูุงุฎุชุจุงุฑ ูุฌูุงุช ุงูุชุญููู ุงูุฌูุงุนู.

---

## ุงููุฑุญูุฉ 4: ููุญุฉ ุงูุชุญูู ุงูููุญุฏุฉ (Dashboard)

### 4.1 ุชูุญูุฏ Dashboards (`dashboard.html`)

**ุงููุฏู:** ุฏูุฌ dashboard ุงูุนุฑุถ ู dashboard ุงูุฅุฏุงุฑุฉ ูู ุตูุญุฉ ูุงุญุฏุฉ.

#### ุงูุชุจููุจุงุช:

**1. ุชุจููุจ ุงูุนุฑุถ:**
- ุฌุฏูู ุจุณูุท ุจุฌููุน ุงูุจุตูุงุช
- ุจุทุงูุงุช ุฅุญุตุงุฆูุฉ:
  - ุฅุฌูุงูู ุงูุจุตูุงุช
  - ุนุงููุฉ ุงูุฎุทูุฑุฉ (>= 80)
  - ูุชูุณุทุฉ ุงูุฎุทูุฑุฉ (50-79)

**2. ุชุจููุจ ุงูุฅุฏุงุฑุฉ (SOC Admin):**
- ุฌุฏูู ูุงูู ูุน ุฌููุน ุงูุชูุงุตูู
- ุฃุฒุฑุงุฑ ุงูุฅุฌุฑุงุกุงุช:
  - ๐ ุฅุฒุงูุฉ ุงูููุน (CLEARED)
  - โ ุชุฃููุฏ ุงูุชูุฏูุฏ (BLOCKED)
  - ๐๏ธ ุญุฐู ุงูุจุตูุฉ

#### ุงูููุฒุงุช:

1. **ุชุญุฏูุซ ุชููุงุฆู:**
   ```javascript
   setInterval(() => {
       loadFingerprints();
   }, 5000);  // ูู 5 ุซูุงูู
   ```

2. **ุฅุดุนุงุฑุงุช ุงูุจุตูุงุช ุงูุฌุฏูุฏุฉ:**
   ```javascript
   const newFingerprints = fingerprints.filter(
       fp => !previousFingerprintIds.has(fp.fingerprint_id)
   );
   if (newFingerprints.length > 0) {
       showNewFingerprintNotification(newFingerprints);
   }
   ```

3. **ุนุฑุถ ุงูุฎุตุงุฆุต ุงูุณููููุฉ:**
   ```javascript
   function formatBehavioralFeatures(features) {
       return Object.entries(features)
           .map(([key, value]) => `${key}: ${value}`)
           .join(', ');
   }
   ```

**ุงูุณุจุจ:** ูุดุบู ูุงุญุฏ ูุญุชุงุฌ ุนุฑุถ ูุฅุฏุงุฑุฉ ูู ููุงู ูุงุญุฏ.

---

## ุงููุฑุญูุฉ 5: ุณููุงุฑูู ุงูุนุฑุถ ุงูุชูุถูุญู ุงููุงูู

### 5.1 ุงูุณููุงุฑูู:

#### ุงูุฎุทูุฉ 1: ุชุณุฌูู ุงูุฏุฎูู ูู ุชููููุง
1. ุงููุณุชุฎุฏู ููุชุญ `tawakkalna-login.html`
2. ูุณุฌู ุงูุฏุฎูู ุจูุฌุงุญ
3. ุงููุธุงู ูุฑุณู:
   - `login_attempt`
   - `login_success`

#### ุงูุฎุทูุฉ 2: ุณููู ูุดุจูู ูู ุงูููุตุฉ ุงูุตุญูุฉ
1. ุงููุณุชุฎุฏู ููุชุญ `health-portal.html`
2. ูููุฑ ุนูู ุฒุฑ "ูุญุงูุงุฉ ูุฌูู ุงูุชุญููู ุงูุฌูุงุนู"
3. ุงููุธุงู ูุฑุณู:
   - 20 ุญุฏุซ `download_file` ูู ุซุงููุชูู
   - ุญุฏุซ `ui_suspicious_pattern` ูุน `pattern: "mass_download"`

#### ุงูุฎุทูุฉ 3: ุฅูุดุงุก ุงูุจุตูุฉ
1. Backend ูุณุชูุจู ุงูุฃุญุฏุงุซ
2. `engine.py` ูุญุณุจ ุงูุฎุตุงุฆุต ุงูุณููููุฉ:
   - `total_events: 20+`
   - `events_per_minute: 600+`
   - `fast_drain: true`
3. ML ุฃู ุงูููุงุนุฏ ุชูุชุดู ุงูุชูุฏูุฏ:
   - `risk_score: 95`
   - `should_create_fingerprint: true`
4. ูุชู ุฅูุดุงุก ุจุตูุฉ:
   ```python
   fingerprint = ThreatFingerprint(
       fingerprint_id="fp-abc123",
       risk_score=95,
       user_id="user-8456123848",
       status="ACTIVE",
       device_id="device-demo-01",
       ip_address="127.0.0.1",
       user_agent="Mozilla/5.0...",
       behavioral_features={...}
   )
   ```

#### ุงูุฎุทูุฉ 4: ุนุฑุถ ุงูุจุตูุฉ ูู Dashboard
1. ุงููุดุบู ููุชุญ `dashboard.html`
2. ูุฑู ุงูุจุตูุฉ ุงูุฌุฏูุฏุฉ ูู ุงูุฌุฏูู
3. ูุฑู:
   - ุฏุฑุฌุฉ ุงูุฎุทูุฑุฉ: 95
   - ุงูุญุงูุฉ: ACTIVE
   - ุงูุฎุตุงุฆุต ุงูุณููููุฉ
   - ูุนูููุงุช ุงูุฌูุงุฒ/ุงูุดุจูุฉ

#### ุงูุฎุทูุฉ 5: ูุญุงููุฉ ุงูุฏุฎูู ุฅูู ุฃุจุดุฑ
1. ููุณ ุงููุณุชุฎุฏู ููุชุญ `absher-login.html`
2. ูุญุงูู ุชุณุฌูู ุงูุฏุฎูู
3. Frontend ูุณุชุฏุนู:
   ```javascript
   fetch(`${API_BASE}/api/v1/check-and-login`, {
       method: 'POST',
       body: JSON.stringify({ user_id: "user-8456123848" })
   })
   ```
4. Backend ูุชุญูู:
   ```python
   is_fingerprinted = is_user_fingerprinted("user-8456123848")
   # Returns True (ููุฌุฏ ุจุตูุฉ ACTIVE)
   ```
5. Backend ูุฑุฏ:
   ```json
   {
       "status": "blocked",
       "allowed": false,
       "message": "ุชู ุญุฌุจ ุฏุฎููู ูุคูุชุงู..."
   }
   ```
6. Frontend ูุนุฑุถ overlay ุงูุญุฌุจ:
   ```
   ๐ซ ุชู ุญุฌุจ ุฏุฎููู
   ุชู ุญุฌุจ ุฏุฎููู ูุคูุชุงู ุจุณุจุจ ุณููู ูุดุจูู ุชู ุฑุตุฏู ุนูู ููุตุฉ ุญููููุฉ ุฃุฎุฑู.
   ```

#### ุงูุฎุทูุฉ 6: ุฅุฏุงุฑุฉ ุงูุจุตูุฉ
1. ุงููุดุบู ูู Dashboard:
   - **ุชุฃููุฏ ุงูุชูุฏูุฏ:** ูุบูุฑ ุงูุญุงูุฉ ุฅูู BLOCKED
   - **ุฅุฒุงูุฉ ุงูููุน:** ูุบูุฑ ุงูุญุงูุฉ ุฅูู CLEARED
   - **ุญุฐู:** ูุญุฐู ุงูุจุตูุฉ ููุงุฆูุงู

---

## ุงููุฑุญูุฉ 6: ุงูููุฒุงุช ุงูุฃูููุฉ ุงููุชูุฏูุฉ

### 6.1 ูุดู ุงูููุฑุงุช ุงูุณุฑูุนุฉ

**ููู ูุนูู:**
1. ูู ุฒุฑ ูุฑุชุจุท ุจู `attachRapidClickDetector()`
2. ุนูุฏ ูู ููุฑุฉุ ูุชู ุญูุธ ุงูููุช
3. ุฅุฐุง ูุงูุช ุงูููุฑุงุช:
   - >= 5 ูู ุซุงููุฉ ูุงุญุฏุฉุ ุฃู
   - >= 15 ูู 5 ุซูุงูู
4. ูุชู ุฅุฑุณุงู ุญุฏุซ `ui_suspicious_pattern`

**ุงูุณุจุจ:** ุงููุฌูุงุช ุบุงูุจุงู ุชุณุชุฎุฏู ููุฑุงุช ุณุฑูุนุฉ ูุชูุฑุฑุฉ.

---

### 6.2 ุงูุญุฌุจ ุนุจุฑ ุงูููุตุงุช

**ููู ูุนูู:**
1. ุฌููุน ุงูููุตุงุช ุชุณุชุฎุฏู ููุณ `DEMO_USER_ID`
2. ุนูุฏูุง ูุชู ุฅูุดุงุก ุจุตูุฉ ูู ุชููููุง
3. ุฃุจุดุฑ ูุชุญูู ูู ููุณ `user_id`
4. ุฅุฐุง ูุฌุฏ ุจุตูุฉ ACTIVE โ ุญุฌุจ

**ุงูุณุจุจ:** ุงูููุงุฌู ูุฏ ูุญุงูู ุงุณุชุฎุฏุงู ููุตุงุช ูุฎุชููุฉ.

---

### 6.3 ุชุชุจุน ูุนูููุงุช ุงูุฌูุงุฒ/ุงูุดุจูุฉ

**ูุง ูุชู ุชุชุจุนู:**
- `device_id` - ูุนุฑู ุงูุฌูุงุฒ
- `ip_address` - ุนููุงู IP
- `user_agent` - ูุนูููุงุช ุงููุชุตูุญ
- `platform` - ุงูููุตุฉ (tawakkalna/absher)

**ุงูุณุจุจ:** ุชุณุงุนุฏ ูู ุฑุจุท ุงูุฃุญุฏุงุซ ุจููุณ ุงููุณุชุฎุฏู/ุงูุฌูุงุฒ.

---

## ุงููุฑุญูุฉ 7: ุชุญุณููุงุช ุงูุฃุฏุงุก ูุงูููุซูููุฉ

### 7.1 CORS Configuration

**ุงููุดููุฉ:** ุงููุชุตูุญ ูููุน ุงูุทูุจุงุช ูู ููุงูุฐ ูุฎุชููุฉ.

**ุงูุญู:**
```python
CORS(app, resources={
    r"/api/*": {
        "origins": "*",
        "methods": ["GET", "POST", "PUT", "DELETE", "OPTIONS"],
        "allow_headers": ["Content-Type", "Authorization"]
    }
})
```

**ุงูุณุจุจ:** Frontend ุนูู port 5000 ู Backend ุนูู port 5000 (ููุณ ุงููููุฐ ูู ูุฐุง ุงููุดุฑูุน).

---

### 7.2 API_BASE ุงูุฏููุงูููู

**ุงููุดููุฉ:** Hardcoded `http://localhost:5000` ูุง ูุนูู ูุน `127.0.0.1`.

**ุงูุญู:**
```javascript
const API_BASE = `${window.location.protocol}//${window.location.hostname}:5000`;
```

**ุงูุณุจุจ:** ูุนูู ูุน ุฃู hostname.

---

### 7.3 DEMO_MODE

**ุงููุฏู:** ุฅุฎูุงุก ุงูุฅุดุนุงุฑุงุช ูู ุงูุนุฑุถ ุงูุชูุถูุญู.

```javascript
const DEMO_MODE = true;

function showNotification(message, type) {
    if (DEMO_MODE) {
        console.log("[DEMO_NOTIFICATION_SUPPRESSED]", message);
        return;  // ูุง ุชุธูุฑ ูููุณุชุฎุฏู
    }
    // ุนุฑุถ ุงูุฅุดุนุงุฑ...
}
```

**ุงูุณุจุจ:** ูุง ูุฑูุฏ ุฅุฒุนุงุฌ ุงูุฌูููุฑ ุจุงูุฅุดุนุงุฑุงุช.

---

## ุงููุฑุญูุฉ 8: ุงูุงุฎุชุจุงุฑุงุช ูุงูุชุญูู

### 8.1 ุงุฎุชุจุงุฑ ุชุฏูู ุงูุฃุญุฏุงุซ

**ุงูุฎุทูุงุช:**
1. ูุชุญ ุตูุญุฉ ุชููููุง
2. ุชุณุฌูู ุงูุฏุฎูู
3. ูุชุญ Console โ ุงูุชุญูู ูู ุงูุฃุญุฏุงุซ ุงููุฑุณูุฉ
4. ูุชุญ Backend logs โ ุงูุชุญูู ูู ุงุณุชูุจุงู ุงูุฃุญุฏุงุซ

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
๐ฅ [EVENT RECEIVED] Type: login_attempt, User: user-8456123848...
๐ฅ [EVENT RECEIVED] Type: login_success, User: user-8456123848...
```

---

### 8.2 ุงุฎุชุจุงุฑ ุฅูุดุงุก ุงูุจุตูุฉ

**ุงูุฎุทูุงุช:**
1. ูุชุญ health-portal
2. ุชูุนูู ูุฌูู ุงูุชุญููู ุงูุฌูุงุนู
3. ูุชุญ Dashboard
4. ุงูุชุญูู ูู ุธููุฑ ุจุตูุฉ ุฌุฏูุฏุฉ

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- ุจุตูุฉ ุฌุฏูุฏุฉ ูู ุงูุฌุฏูู
- `risk_score >= 80`
- `status: "ACTIVE"`
- `behavioral_features` ุชุญุชูู ุนูู ุจูุงูุงุช

---

### 8.3 ุงุฎุชุจุงุฑ ุงูุญุฌุจ ุนุจุฑ ุงูููุตุงุช

**ุงูุฎุทูุงุช:**
1. ุฅูุดุงุก ุจุตูุฉ ูู ุชููููุง
2. ูุญุงููุฉ ุงูุฏุฎูู ุฅูู ุฃุจุดุฑ
3. ุงูุชุญูู ูู ุธููุฑ overlay ุงูุญุฌุจ

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- `check-and-login` ูุฑุฌุน `403`
- Overlay ูุธูุฑ ูุน ุฑุณุงูุฉ ุงูุญุฌุจ
- ูุง ูููู ุชุณุฌูู ุงูุฏุฎูู

---

## ๐ ููุฎุต ุงูุชุฏูู ุงููุงูู

```
[Frontend]                    [Backend]                    [Storage]
     |                            |                            |
     |-- login_attempt ---------->|                            |
     |                            |-- store_event() ---------->|
     |                            |-- process_event()         |
     |                            |   |                        |
     |                            |   |-- calculate_features() |
     |                            |   |-- ML prediction        |
     |                            |   |-- Rules check          |
     |                            |   |                        |
     |                            |   |-- create_fingerprint() |
     |                            |   |                        |
     |                            |   |-- store_fingerprint() ->|
     |                            |                            |
     |<-- fingerprint_generated --|                            |
     |                            |                            |
     |-- check-and-login -------->|                            |
     |                            |-- is_user_fingerprinted()  |
     |                            |   |                        |
     |                            |   |-- check FINGERPRINTS_STORE
     |                            |                            |
     |<-- blocked (403) ----------|                            |
     |                            |                            |
     |-- showBlockOverlay()       |                            |
```

---

## ๐ ุงูููุงููู ุงูุฃุณุงุณูุฉ

### 1. Event (ุงูุญุฏุซ)
- ุฃู ุฅุฌุฑุงุก ูููู ุจู ุงููุณุชุฎุฏู
- ูุชู ุฅุฑุณุงูู ุฅูู Backend ููุฑุงู
- ูุญุชูู ุนูู: ููุน ุงูุญุฏุซุ ุงููุณุชุฎุฏูุ ุงูุฌูุงุฒุ ุงูููุชุ ุงูููุตุฉ

### 2. Behavioral Features (ุงูุฎุตุงุฆุต ุงูุณููููุฉ)
- ููุงุณุงุช ุฑูููุฉ ููุณููู
- ูุซุงู: `events_per_minute: 150`
- ุชุณุชุฎุฏู ูู ML ู Rules

### 3. Threat Fingerprint (ุจุตูุฉ ุงูุชูุฏูุฏ)
- ุชูุซู ุชูุฏูุฏุงู ูุญุชููุงู
- ุชุญุชูู ุนูู: ุฏุฑุฌุฉ ุงูุฎุทูุฑุฉุ ุงูุฎุตุงุฆุตุ ูุนูููุงุช ุงูุฌูุงุฒ
- ูููู ุงุณุชุฎุฏุงููุง ูููุน ุงููุตูู

### 4. Risk Score (ุฏุฑุฌุฉ ุงูุฎุทูุฑุฉ)
- ุฑูู ูู 0 ุฅูู 100
- >= 80: ุนุงููุฉ ุงูุฎุทูุฑุฉ โ ุฅูุดุงุก ุจุตูุฉ
- < 80: ููุฎูุถุฉ ุงูุฎุทูุฑุฉ โ ุชุฌุงูู

### 5. Status (ุงูุญุงูุฉ)
- **ACTIVE:** ุจุตูุฉ ูุดุทุฉ โ ุชููุน ุงููุตูู
- **BLOCKED:** ุชู ุชุฃููุฏ ุงูุชูุฏูุฏ โ ุญุฌุจ ุฏุงุฆู
- **CLEARED:** ุชู ุฅุฒุงูุฉ ุงูููุน โ ูุง ุชููุน ุงููุตูู

---

## ๐ฏ ุญุงูุงุช ุงูุงุณุชุฎุฏุงู ุงูุฑุฆูุณูุฉ

### 1. ุงูุชุดุงู ูุฌูู ุงูุชุญููู ุงูุฌูุงุนู
- ุงููุณุชุฎุฏู ูุญูู 20 ูููุงู ูู ุซุงููุชูู
- ุงููุธุงู ููุชุดู ุงูููุท
- ููุดุฆ ุจุตูุฉ ุนุงููุฉ ุงูุฎุทูุฑุฉ

### 2. ุงูุชุดุงู ุงูููุฑุงุช ุงูุณุฑูุนุฉ
- ุงููุณุชุฎุฏู ูููุฑ 10 ูุฑุงุช ุนูู ุฒุฑ ูู ุซุงููุฉ
- `attachRapidClickDetector` ููุชุดู
- ูุฑุณู `ui_suspicious_pattern`

### 3. ุงูุญุฌุจ ุนุจุฑ ุงูููุตุงุช
- ุณููู ูุดุจูู ูู ุชููููุง
- ูุญุงููุฉ ุฏุฎูู ุฃุจุดุฑ โ ูุญุฌูุจ

### 4. ุฅุฏุงุฑุฉ ุงูุจุตูุงุช
- ุงููุดุบู ูุฑุงุฌุน ุงูุจุตูุงุช
- ูุคูุฏ ุงูุชูุฏูุฏุงุช ุฃู ูุฒูู ุงูููุน

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ (ุชุญุณููุงุช ูุณุชูุจููุฉ)

1. **ูุงุนุฏุฉ ุจูุงูุงุช ุญููููุฉ:**
   - ุงุณุชุจุฏุงู ุงูุชุฎุฒูู ูู ุงูุฐุงูุฑุฉ ุจู PostgreSQL/MongoDB

2. **ุชุญุณูู ML:**
   - ุชุฏุฑูุจ ูููุฐุฌ ุฃูุถู
   - ุฅุถุงูุฉ ููุฒุงุช ุฌุฏูุฏุฉ

3. **Real-time Updates:**
   - WebSockets ููู Dashboard
   - ุชุญุฏูุซ ููุฑู ุจุฏูู refresh

4. **Authentication:**
   - ูุธุงู ุชุณุฌูู ุฏุฎูู ุญูููู
   - JWT tokens

5. **Logging & Monitoring:**
   - ุณุฌูุงุช ููุตูุฉ
   - ูุฑุงูุจุฉ ุงูุฃุฏุงุก

---

## ๐ ุงูุฎูุงุตุฉ

ูุฐุง ุงููุดุฑูุน ููุถุญ ููููุฉ ุจูุงุก ูุธุงู ุฃููู ูุชูุงูู ูุงูุชุดุงู ุงูุชูุฏูุฏุงุช ุงูุณููููุฉ ุนุจุฑ ุงูููุตุงุช ุงูุญููููุฉ. ูุนุชูุฏ ุนูู:

- **ุชุญููู ุณูููู:** ูุฑุงูุจุฉ ุงูุฃููุงุท ุงููุดุจููุฉ
- **ML + Rules:** ูุดู ูุฌูู
- **ุญุฌุจ ุนุจุฑ ุงูููุตุงุช:** ููุน ุงููุตูู ุจูุงุกู ุนูู ุงูุจุตูุงุช
- **ูุงุฌูุฉ ููุญุฏุฉ:** Dashboard ูุงุญุฏ ููุนุฑุถ ูุงูุฅุฏุงุฑุฉ

ุงููุธุงู ุฌุงูุฒ ููุนุฑุถ ุงูุชูุถูุญู ููููู ุชุทููุฑู ูุจูุฆุฉ ุฅูุชุงุฌูุฉ.

---

**ุชุงุฑูุฎ ุงูุฅูุดุงุก:** 2024  
**ุงูุฅุตุฏุงุฑ:** 1.0  
**ุงูุญุงูุฉ:** ุฌุงูุฒ ููุนุฑุถ ุงูุชูุถูุญู

